/* CHAPTER 9: EXAMPLE 2 OF 4 HOSPITALS AND THREE TREATMENS CODED BY ALTERNATIVE METHODS */

title 'Chapter 9, Example 2'; 
proc import datafile='c:\ccwa\chap09\data\c0902dt.txt' out=c0902 dbms=tab replace;
getnames=yes;
run;
data cc0902;
set c0902;
hosp1e=0;
if hospital=1 then hosp1e=1;
if hospital=4 then hosp1e=-1;
hosp2e=0;
if hospital=2 then hosp2e=1;
if hospital=4 then hosp2e=-1;
hosp3e=0;
if hospital=3 then hosp3e=1;
if hospital=4 then hosp3e=-1;
treat4d=0;
if treatmen=1 then treat4d=1;
treat5d=0;
if treatmen=2 then treat5d=1;
hbytd6=hosp1e*treat4d;
hbytd7=hosp1e*treat5d;
hbytd8=hosp2e*treat4d;
hbytd9=hosp2e*treat5d;
hbytd10=hosp3e*treat4d;
hbytd11=hosp3e*treat5d;
treat4e=0;
if treatmen=2 then treat4e=1;
if treatmen=3 then treat4e=-1;
if treatmen=1 then treat5e=1;
if treatmen=2 then treat5e=0;
if treatmen=3 then treat5e=-1;
hbyte6=hosp1e*treat4e;
hbyte7=hosp1e*treat5e;
hbyte8=hosp2e*treat4e;
hbyte9=hosp2e*treat5e;
hbyte10=hosp3e*treat4e;
hbyte11=hosp3e*treat5e;
output;
proc glm data=cc0902;
class hospital treatmen;
model y=hospital treatmen hospital*treatmen;
run;
proc reg data=cc0902;
model y=hosp1e hosp2e hosp3e treat4e treat5e hbyte6 hbyte7 hbyte8 hbyte9 hbyte10 hbyte11;
run;
proc reg data=cc0902;
model y=treat4e treat5e hbyte6 hbyte7 hbyte8 hbyte9 hbyte10 hbyte11;
run;
proc reg data=cc0902;
model y=hosp1e hosp2e hosp3e hbyte6 hbyte7 hbyte8 hbyte9 hbyte10 hbyte11;
run;
proc reg data=cc0902;
model y=hosp1e hosp2e hosp3e treat4d treat5d hbytd6 hbytd7 hbytd8 hbytd9 hbytd10 hbytd11;
run;
