/* Chapter 9: Example 3.  Testing Dweck's theory with 3 levels of attribution */
/*                        2 levels of difficulty and 2 levels of failure */

title 'Chapter 9, Example 3, Table 9.2.1'; 
proc import datafile='c:\ccwa\chap09\data\c0903dt.txt' out=c0903 dbms=tab replace;
getnames=yes;
run;
data cc0903;
set c0903;
a1_d=0;
if attrib=1 then a1_d=1;
a2_d=0;
if attrib=3 then a2_d=1;
d3_d=0;
if diff=1 then d3_d=1;
f4_d=0;
if fail=1 then f4_d=1;
a1d3_d=a1_d*d3_d;
a2d3_d=a2_d*d3_d;
a1f4_d=a1_d*f4_d;
a2f4_d=a2_d*f4_d;
d3f4_d=d3_d*f4_d;
a1d3f4_d=a1_d*d3_d*f4_d;
a2d3f4_d=a2_d*d3_d*f4_d;
a1_u=0;
if attrib=1 then a1_u=1;
if attrib=2 then a1_u=-1;
a2_u=0;
if attrib=2 then a2_u=-1;
if attrib=3 then a2_u=1;
d3_u=1;
if diff=2 then d3_u=-1;
f4_u=1;
if fail=2 then f4_u=-1;
a1d3_u=a1_u*d3_u;
a2d3_u=a2_u*d3_u;
a1f4_u=a1_u*f4_u;
a2f4_u=a2_u*f4_u;
d3f4_u=d3_u*f4_u;
a1d3f4_u=a1_u*d3_u*f4_u;
a2d3f4_u=a2_u*d3_u*f4_u;
a1_w=0;
if attrib=1 then a1_w=1;
if attrib=2 then a1_w=-37/46;
a2_w=0;
if attrib=3 then a2_w=1;
if attrib=2 then a2_w=-37/46;
d3_w=1;
if diff=2 then d3_w=-56/64;
f4_w=1;
if fail=2 then f4_w=-61/59;
a1d3_w=a1_w*d3_w;
a2d3_w=a2_w*d3_w;
a1f4_w=a1_w*f4_w;
a2f4_w=a2_w*f4_w;
d3f4_w=d3_w*f4_w;
a1d3f4_w=a1_w*d3_w*f4_w;
a2d3f4_w=a2_w*d3_w*f4_w;
a1_c=0;
if attrib=1 then a1_c=0.5;
if attrib=3 then a1_c=-0.5;
a2_c=-0.5;
if attrib=2 then a2_c=1;
d3_c=0.5;
if diff=2 then d3_c=-0.5;
f4_c=0.5;
if fail=2 then f4_c=-0.5;
a1d3_c=a1_c*d3_c;
a2d3_c=a2_c*d3_c;
a1f4_c=a1_c*f4_c;
a2f4_c=a2_c*f4_c;
d3f4_c=d3_c*f4_c;
output;
proc means data=cc0903;
var y;
by attrib diff fail;
run;
proc reg data=cc0903;
model y=a1_d a2_d d3_d f4_d;
run;
proc reg data=cc0903;
model y=a1_d a2_d d3_d f4_d a1d3_d a2d3_d a1f4_d a2f4_d d3f4_d;
run;
proc reg data=cc0903;
model y=a1_d a2_d d3_d f4_d a1d3_d a2d3_d a1f4_d a2f4_d d3f4_d a1d3f4_d a2d3f4_d;
run;
proc reg data=cc0903;
model y=a1_u a2_u d3_u f4_u a1d3_u a2d3_u a1f4_u a2f4_u d3f4_u a1d3f4_u a2d3f4_u;
run;
proc reg data=cc0903;
model y=a1_w a2_w d3_w f4_w a1d3_w a2d3_w a1f4_w a2f4_w d3f4_w a1d3f4_w a2d3f4_w;
run;
proc reg data=cc0903;
model y=a1_c a2_c d3_c f4_c a1d3_c a2d3_c a1f4_c a2f4_c d3f4_c;
run;
